# This demonstrates working with branch names

name: Branches

on:
  # When pushing to the relevant folder or to the yml file itself
  push:
    paths:
      - 'branches/**/*'
      - '.github/workflows/branch-test.yml'
  # pull_request:
  #   paths:
  #     - 'branches/**/*'
  #     - '.github/workflows/branch-test.yml'
  #   branches: [ $default-branch ]

jobs:
  build:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./branches
    steps:
      - name: Setup checkout
        uses: actions/checkout@v2
      - name: Current branch name
        run: echo running on branch ${GITHUB_REF##*/}
      - name: Default branch name
        run: echo default branch is $(git remote show origin | awk '/HEAD branch/ {print $NF}')
